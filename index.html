<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portfolio</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,500&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#fff;--fg:#1a1a1a;--muted:#444;--faint:#888;
  --link:#c0392b;--border:#e8e8e8;--subtle:#f8f8f8;
  --adm-bg:#0f1117;--adm-surface:#1a1d27;--adm-surface2:#242736;
  --adm-border:#2e3247;--adm-muted:#6b7280;--adm-fg:#e2e5f0;
  --adm-green:#22c55e;--adm-red:#ef4444;
}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--fg);font-family:'EB Garamond',Georgia,serif;font-size:19px;line-height:1.75;min-height:100vh}
.wrap{max-width:860px;margin:0 auto;padding:0 32px}

/* â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#site-header{display:flex;align-items:baseline;justify-content:space-between;padding:40px 0 28px;border-bottom:1px solid var(--border);gap:20px}
.site-name{font-family:'EB Garamond',serif;font-size:2rem;font-weight:700;color:var(--fg);text-decoration:none;letter-spacing:-.01em;line-height:1;flex-shrink:0}
.site-name:hover{color:var(--link)}

/* Desktop nav */
.site-nav{display:flex;gap:28px;align-items:baseline;flex-wrap:wrap}
.site-nav a{font-family:'EB Garamond',serif;font-size:1.15rem;color:var(--link);text-decoration:none;transition:opacity .15s}
.site-nav a:hover{opacity:.7}
.site-nav a.active{text-decoration:underline;text-underline-offset:3px}

/* Hamburger â€” hidden on desktop */
.hamburger{display:none;flex-direction:column;gap:5px;background:none;border:none;cursor:pointer;padding:4px;z-index:10}
.hamburger span{display:block;width:22px;height:2px;background:var(--fg);border-radius:2px;transition:all .25s}
.hamburger.open span:nth-child(1){transform:translateY(7px) rotate(45deg)}
.hamburger.open span:nth-child(2){opacity:0}
.hamburger.open span:nth-child(3){transform:translateY(-7px) rotate(-45deg)}

/* Mobile nav drawer */
.mobile-nav{display:none;position:fixed;inset:0;top:0;background:rgba(255,255,255,.97);z-index:200;flex-direction:column;align-items:center;justify-content:center;gap:32px;backdrop-filter:blur(4px)}
.mobile-nav.open{display:flex;animation:fadeIn .2s ease}
.mobile-nav a{font-family:'EB Garamond',serif;font-size:2rem;font-weight:500;color:var(--fg);text-decoration:none;transition:color .15s}
.mobile-nav a:hover,.mobile-nav a.active{color:var(--link)}
.mobile-nav-close{position:absolute;top:28px;right:28px;font-size:1.5rem;background:none;border:none;cursor:pointer;color:var(--faint)}

/* â”€â”€ PAGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.page{display:none;padding:48px 0 96px}
.page.active{display:block;animation:fadeIn .18s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
@keyframes slideIn{from{transform:translateX(36px);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes slideUp{from{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}

/* â”€â”€ HOME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.home-tagline{font-size:2.1rem;font-style:italic;font-weight:400;margin-bottom:40px;line-height:1.3}
.home-body{display:grid;grid-template-columns:1fr 220px;gap:48px;align-items:start}
.home-text p{margin-bottom:1.1em}
.home-text a{color:var(--link);text-decoration:underline;text-underline-offset:2px}
.home-photo-wrap{display:flex;justify-content:center;padding-top:4px}
.home-photo{width:200px;height:200px;border-radius:50%;object-fit:cover;object-position:center top;display:block;filter:grayscale(100%)}
.home-photo-placeholder{width:200px;height:200px;border-radius:50%;background:#ebebeb;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;color:#aaa;font-size:.72rem;font-family:'JetBrains Mono',monospace;text-align:center;cursor:pointer;border:2px dashed #d0d0d0;transition:border-color .2s,color .2s}
.home-photo-placeholder:hover{border-color:var(--link);color:var(--link)}
.home-photo-placeholder .ph-icon{font-size:2rem;line-height:1}
.home-links{margin-top:36px;display:flex;gap:20px;flex-wrap:wrap}
.home-links a{font-size:.95rem;color:var(--link);text-decoration:underline;text-underline-offset:2px}
.home-links a:hover{opacity:.7}
.home-posts-section{margin-top:56px}
.home-posts-title{font-size:1rem;font-weight:500;margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid var(--border)}
.home-post-row{display:flex;gap:20px;padding:8px 0;border-bottom:1px solid var(--border);align-items:baseline}
.home-post-date{font-size:.82rem;color:var(--faint);font-family:'JetBrains Mono',monospace;min-width:80px;white-space:nowrap}
.home-post-link{font-size:.97rem;color:var(--link);text-decoration:none}
.home-post-link:hover{text-decoration:underline}

/* â”€â”€ PROJECTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.page-title{font-size:1.75rem;font-style:italic;font-weight:400;margin-bottom:36px}
.project-row{display:grid;grid-template-columns:200px 1fr auto;gap:8px 20px;padding:12px 0;border-bottom:1px solid var(--border);align-items:baseline}
.project-row:first-of-type{border-top:1px solid var(--border)}
.project-name{font-size:.82rem;font-weight:500;color:var(--link);text-decoration:none;font-family:'JetBrains Mono',monospace}
.project-name:hover{text-decoration:underline}
.project-desc{font-size:.95rem;color:var(--muted)}
.project-tags{display:flex;gap:5px;flex-wrap:wrap;justify-content:flex-end}
.ptag{font-size:.6rem;color:var(--faint);border:1px solid var(--border);padding:1px 6px;border-radius:2px;font-family:'JetBrains Mono',monospace;white-space:nowrap}

/* â”€â”€ EXPERIENCE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.exp-item{padding:18px 0;border-bottom:1px solid var(--border)}
.exp-item:first-of-type{border-top:1px solid var(--border)}
.exp-top{display:flex;justify-content:space-between;align-items:baseline;gap:12px;flex-wrap:wrap;margin-bottom:3px}
.exp-role{font-size:1rem;font-weight:500}
.exp-period{font-size:.76rem;color:var(--faint);font-family:'JetBrains Mono',monospace;white-space:nowrap}
.exp-company{font-size:.88rem;color:var(--link);margin-bottom:6px}
.exp-desc{font-size:.93rem;color:var(--muted)}

/* â”€â”€ BLOG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.post-row{display:flex;gap:24px;padding:10px 0;border-bottom:1px solid var(--border);align-items:baseline}
.post-row:first-of-type{border-top:1px solid var(--border)}
.post-date{font-size:.78rem;color:var(--faint);font-family:'JetBrains Mono',monospace;white-space:nowrap;min-width:86px}
.post-link{font-size:1rem;color:var(--link);text-decoration:none}
.post-link:hover{text-decoration:underline}
.post-back{font-size:.88rem;color:var(--link);text-decoration:none;display:inline-block;margin-bottom:28px}
.post-back:hover{text-decoration:underline}
.post-page-date{font-size:.8rem;color:var(--faint);font-family:'JetBrains Mono',monospace;margin-bottom:10px}
.post-page-title{font-size:1.9rem;font-weight:500;line-height:1.3;margin-bottom:36px;padding-bottom:24px;border-bottom:1px solid var(--border)}
.post-content{font-size:1rem;line-height:1.85}
.post-content p{margin-bottom:1.3em}
.post-content h2{font-size:1.3rem;font-weight:500;font-style:italic;margin:2em 0 .6em}
.post-content code{font-family:'JetBrains Mono',monospace;font-size:.78rem;background:var(--subtle);border:1px solid var(--border);padding:1px 5px;border-radius:2px}
.post-content pre{background:var(--subtle);border:1px solid var(--border);padding:16px 20px;border-radius:3px;overflow-x:auto;margin:1.3em 0;line-height:1.6}
.post-content pre code{background:none;border:none;padding:0}
.post-content blockquote{border-left:3px solid var(--border);padding-left:20px;color:var(--muted);font-style:italic;margin:1.3em 0}
.post-content a{color:var(--link);text-decoration:underline;text-underline-offset:2px}
.post-content ul,.post-content ol{padding-left:1.6em;margin-bottom:1.2em}
.post-content li{margin-bottom:.3em}
.post-content img{max-width:100%;height:auto;display:block;margin:1.8em 0;border-radius:3px}
.post-content figure{margin:2em 0}
.post-content figure img{margin-bottom:10px}
.post-content figcaption{font-size:.82rem;color:var(--faint);font-style:italic;text-align:center}

/* â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#site-footer{border-top:1px solid var(--border);padding:22px 0 40px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px}
.footer-copy{font-size:.82rem;color:var(--faint)}
.admin-trigger{font-size:.72rem;color:transparent;background:none;border:none;cursor:default;transition:color .3s;font-family:'JetBrains Mono',monospace}
.admin-trigger:hover{color:var(--faint);cursor:pointer}
.pg-empty{color:var(--faint);font-size:.97rem;padding:12px 0;font-style:italic}

/* â”€â”€ ADMIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.admin-overlay{display:none;position:fixed;inset:0;background:var(--adm-bg);z-index:500;overflow:hidden;font-family:'JetBrains Mono',monospace;color:var(--adm-fg)}
.admin-overlay.open{display:flex;animation:fadeIn .2s ease}
.admin-login{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;gap:20px;padding:40px}
.login-box{background:var(--adm-surface);border:1px solid var(--adm-border);border-radius:8px;padding:28px;width:100%;max-width:340px;display:flex;flex-direction:column;gap:14px}
.login-box input{background:var(--adm-bg);border:1px solid var(--adm-border);color:var(--adm-fg);padding:9px 13px;border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:.8rem;outline:none;transition:border-color .2s;width:100%}
.login-box input:focus{border-color:#5b8af5}
.login-hint{font-size:.65rem;color:var(--adm-muted);text-align:center}
.login-error{color:var(--adm-red);font-size:.7rem;text-align:center;min-height:15px}
.admin-layout{display:flex;width:100%;height:100%}
.admin-sidebar{width:210px;min-width:210px;background:var(--adm-surface);border-right:1px solid var(--adm-border);display:flex;flex-direction:column;padding:22px 0}
.sidebar-logo{padding:0 18px 20px;border-bottom:1px solid var(--adm-border);margin-bottom:14px}
.sl-label{font-size:.62rem;color:var(--adm-muted);letter-spacing:.1em;text-transform:uppercase}
.sl-name{font-size:.82rem;color:var(--adm-fg);margin-top:2px}
.sidebar-nav{flex:1;display:flex;flex-direction:column;gap:2px;padding:0 10px}
.sbtn{background:none;border:none;color:var(--adm-muted);font-family:'JetBrains Mono',monospace;font-size:.72rem;letter-spacing:.03em;text-align:left;padding:8px 10px;border-radius:4px;cursor:pointer;transition:all .15s;display:flex;align-items:center;gap:9px}
.sbtn:hover,.sbtn.active{background:var(--adm-surface2);color:var(--adm-fg)}
.sbtn .ico{width:14px;text-align:center;font-size:.8rem}
.sidebar-foot{padding:14px 10px 0;border-top:1px solid var(--adm-border);margin-top:14px}
.admin-main{flex:1;overflow-y:auto;display:flex;flex-direction:column}
.admin-topbar{padding:18px 28px;border-bottom:1px solid var(--adm-border);display:flex;justify-content:space-between;align-items:center;background:var(--adm-surface);position:sticky;top:0;z-index:10}
.admin-topbar h1{font-size:.8rem;letter-spacing:.07em;text-transform:uppercase}
.db-status{display:flex;align-items:center;gap:7px;font-size:.66rem}
.db-dot{width:7px;height:7px;border-radius:50%;background:var(--adm-muted)}
.db-dot.ok{background:var(--adm-green)}
.db-dot.err{background:var(--adm-red)}
.admin-body{padding:28px;flex:1}
.apanel{display:none}
.apanel.active{display:block;animation:fadeIn .2s ease}
.sec-hdr{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}
.sec-label{font-size:.68rem;letter-spacing:.08em;text-transform:uppercase;color:var(--adm-muted)}
.items-list{display:flex;flex-direction:column;margin-bottom:20px}
.icard{background:var(--adm-surface);border:1px solid var(--adm-border);border-radius:5px;padding:14px 18px;display:flex;justify-content:space-between;align-items:flex-start;gap:14px;margin-bottom:7px}
.icard-info{flex:1;min-width:0}
.icard-title{font-size:.78rem;color:var(--adm-fg);font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.icard-sub{font-size:.66rem;color:var(--adm-muted);margin-top:3px}
.icard-tags{display:flex;gap:5px;flex-wrap:wrap;margin-top:6px}
.icard-tag{font-size:.6rem;background:var(--adm-surface2);border:1px solid var(--adm-border);padding:1px 7px;border-radius:2px;color:var(--adm-muted)}
.icard-actions{display:flex;gap:7px;flex-shrink:0}
.btn{font-family:'JetBrains Mono',monospace;font-size:.7rem;padding:7px 13px;border-radius:4px;border:1px solid;cursor:pointer;transition:all .15s;display:inline-flex;align-items:center;gap:5px}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn-primary{background:#c0392b;border-color:#c0392b;color:#fff}
.btn-primary:hover:not(:disabled){background:#a93226}
.btn-ghost{background:transparent;border-color:var(--adm-border);color:var(--adm-muted)}
.btn-ghost:hover:not(:disabled){border-color:var(--adm-fg);color:var(--adm-fg)}
.btn-danger{background:transparent;border-color:var(--adm-border);color:var(--adm-red)}
.btn-danger:hover:not(:disabled){border-color:var(--adm-red);background:rgba(239,68,68,.07)}
.btn-sm{padding:4px 9px;font-size:.63rem}
.drawer-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:600}
.drawer-overlay.open{display:flex;justify-content:flex-end;animation:fadeIn .18s ease}
.drawer{width:500px;max-width:100%;background:var(--adm-surface);height:100%;overflow-y:auto;padding:28px;display:flex;flex-direction:column;gap:18px;animation:slideIn .22s ease}
.drawer-hdr{display:flex;justify-content:space-between;align-items:center}
.drawer-title{font-size:.75rem;letter-spacing:.08em;text-transform:uppercase}
.drawer-close{background:none;border:none;color:var(--adm-muted);font-size:1.1rem;cursor:pointer;padding:3px;transition:color .15s}
.drawer-close:hover{color:var(--adm-fg)}
.fgrp{display:flex;flex-direction:column;gap:7px}
.flbl{font-size:.63rem;letter-spacing:.1em;text-transform:uppercase;color:var(--adm-muted)}
.finput,.ftarea,.fselect{background:var(--adm-bg);border:1px solid var(--adm-border);color:var(--adm-fg);padding:9px 13px;border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:.76rem;outline:none;transition:border-color .2s;width:100%}
.finput:focus,.ftarea:focus,.fselect:focus{border-color:#5b8af5}
.ftarea{resize:vertical;min-height:110px;line-height:1.6}
.fhint{font-size:.61rem;color:var(--adm-muted)}
.frow{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.dfooter{display:flex;gap:10px;justify-content:flex-end;padding-top:14px;border-top:1px solid var(--adm-border)}
.profile-form{display:grid;gap:18px;max-width:580px}
.empty-state{text-align:center;padding:40px 20px;color:var(--adm-muted);font-size:.72rem}
.photo-preview{width:72px;height:72px;border-radius:50%;object-fit:cover;border:2px solid var(--adm-border);flex-shrink:0}
.toast{position:fixed;bottom:28px;right:28px;background:var(--adm-surface2);border:1px solid var(--adm-border);color:var(--adm-fg);font-family:'JetBrains Mono',monospace;font-size:.7rem;padding:11px 18px;border-radius:5px;z-index:999;display:flex;align-items:center;gap:9px;box-shadow:0 6px 24px rgba(0,0,0,.4);animation:slideUp .22s ease}
.toast.ok{border-color:var(--adm-green)}
.toast.ok::before{content:'âœ“';color:var(--adm-green)}
.toast.err{border-color:var(--adm-red)}
.toast.err::before{content:'âœ•';color:var(--adm-red)}

/* â”€â”€ POST EDITOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.toolbar{display:flex;gap:4px;flex-wrap:wrap;padding:8px 10px;background:var(--adm-surface2);border:1px solid var(--adm-border);border-bottom:none;border-radius:4px 4px 0 0}
.toolbar+.ftarea{border-radius:0 0 4px 4px}
.tbtn{font-family:'JetBrains Mono',monospace;font-size:.65rem;padding:4px 9px;background:var(--adm-surface);border:1px solid var(--adm-border);color:var(--adm-muted);border-radius:3px;cursor:pointer;transition:all .15s;white-space:nowrap}
.tbtn:hover{background:var(--adm-bg);color:var(--adm-fg)}
.tbtn-active{background:rgba(192,57,43,.15)!important;border-color:#c0392b!important;color:#c0392b!important}
.tbtn-sep{background:none!important;border:none!important;color:var(--adm-border)!important;cursor:default!important}
.img-panel{background:var(--adm-surface2);border:1px solid var(--adm-border);border-radius:5px;overflow:hidden}
.img-tabs{display:flex;border-bottom:1px solid var(--adm-border);background:var(--adm-surface)}
.img-tab{flex:1;font-family:'JetBrains Mono',monospace;font-size:.65rem;text-transform:uppercase;padding:10px 8px;background:none;border:none;color:var(--adm-muted);cursor:pointer;border-bottom:2px solid transparent;transition:all .15s}
.img-tab.active{color:var(--adm-fg);border-bottom-color:#c0392b}
.img-pane{display:none;padding:14px;flex-direction:column;gap:12px}
.img-pane.active{display:flex}
.drop-zone{border:2px dashed var(--adm-border);border-radius:5px;padding:24px 16px;text-align:center;cursor:pointer;transition:border-color .2s,background .2s;font-size:.7rem;color:var(--adm-muted);line-height:1.7;display:block}
.drop-zone:hover,.drop-zone.over{border-color:#c0392b;background:rgba(192,57,43,.05);color:var(--adm-fg)}
.preview-row{display:flex;gap:10px;align-items:center;background:var(--adm-bg);border:1px solid var(--adm-border);border-radius:4px;padding:8px 10px}
.preview-thumb{width:48px;height:48px;object-fit:cover;border-radius:3px;flex-shrink:0}
.preview-url{font-size:.63rem;color:var(--adm-muted);word-break:break-all;flex:1}
.progress{height:3px;background:var(--adm-border);border-radius:2px;overflow:hidden}
.progress-bar{height:100%;background:#c0392b;width:0%;transition:width .3s}
.caption-row{display:flex;gap:8px;align-items:center}
.img-status{font-size:.65rem;color:var(--adm-muted);min-height:16px}
.img-status.ok{color:var(--adm-green)}
.img-status.err{color:var(--adm-red)}

/* â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media(max-width:700px){
  .wrap{padding:0 22px}

  /* Stack header, center everything like nadh.in */
  #site-header{
    flex-direction:column;
    align-items:center;
    text-align:center;
    padding:36px 0 22px;
    gap:16px;
  }
  .site-name{font-size:2.4rem}

  /* Nav just wraps centered â€” no hamburger needed */
  .site-nav{display:flex;justify-content:center;gap:18px;flex-wrap:wrap}
  .site-nav a{font-size:1.05rem}
  .hamburger{display:none!important}
  .mobile-nav{display:none!important}

  /* Single column, photo centered at top */
  .home-body{grid-template-columns:1fr;gap:28px}
  .home-photo-wrap{order:-1;justify-content:center}
  .home-photo,.home-photo-placeholder{width:220px;height:220px}
  .home-tagline{font-size:1.9rem;text-align:center;margin-bottom:28px}
  .home-text p{font-size:1.05rem}
  .home-links{justify-content:center}

  .project-row{grid-template-columns:1fr;gap:4px}
  .project-tags{justify-content:flex-start}
  .page-title{font-size:1.5rem}
  .page{padding:32px 0 72px}
  .admin-sidebar{display:none}
  .frow{grid-template-columns:1fr}
  .drawer{width:100%}
}
</style>
</head>
<body>

<div class="wrap">
  <header id="site-header">
    <a class="site-name" href="#home" id="hdrName">Portfolio</a>
    <nav class="site-nav">
      <a href="#home"       id="nav-home">Home</a>
      <a href="#projects"   id="nav-projects">Projects</a>
      <a href="#experience" id="nav-experience">Experience</a>
      <a href="#blog"       id="nav-blog">Blog</a>
      <a href="https://cv.shlokkakade.com" target="_blank" rel="noopener">Resume</a>
    </nav>
    <button class="hamburger" id="hamburger" onclick="toggleMobileNav()" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
  </header>

  <!-- Mobile nav overlay -->
  <nav class="mobile-nav" id="mobileNav">
    <button class="mobile-nav-close" onclick="closeMobileNav()">âœ•</button>
    <a href="#home"       onclick="closeMobileNav()">Home</a>
    <a href="#projects"   onclick="closeMobileNav()">Projects</a>
    <a href="#experience" onclick="closeMobileNav()">Experience</a>
    <a href="#blog"       onclick="closeMobileNav()">Blog</a>
    <a href="https://cv.shlokkakade.com" target="_blank" rel="noopener" onclick="closeMobileNav()">Resume</a>
  </nav>

  <div class="page" id="page-home">
    <div class="home-tagline" id="homeTagline"></div>
    <div class="home-body">
      <div>
        <div class="home-text" id="homeAbout"></div>
        <div class="home-links" id="homeLinks"></div>
        <div class="home-posts-section" id="homePostsSection" style="display:none">
          <div class="home-posts-title">Blog posts</div>
          <div id="homePostsList"></div>
        </div>
      </div>
      <div class="home-photo-wrap" id="photoWrap">
        <div class="home-photo-placeholder" id="photoPlaceholder" onclick="openAdmin()">
          <span class="ph-icon">â—</span><span>Add photo<br>in admin</span>
        </div>
      </div>
    </div>
  </div>

  <div class="page" id="page-projects">
    <div class="page-title">Projects</div>
    <div id="projectsContent"></div>
  </div>

  <div class="page" id="page-experience">
    <div class="page-title">Experience</div>
    <div id="experienceContent"></div>
  </div>

  <div class="page" id="page-blog">
    <div class="page-title">Blog</div>
    <div id="blogContent"></div>
  </div>

  <div class="page" id="page-post">
    <a class="post-back" href="#blog">â† Blog</a>
    <div class="post-page-date" id="postPageDate"></div>
    <h1 class="post-page-title" id="postPageTitle"></h1>
    <div class="post-content" id="postPageBody"></div>
  </div>

  <footer id="site-footer">
    <span class="footer-copy" id="footerCopy"></span>
    <button class="admin-trigger" onclick="openAdmin()">âš™ admin</button>
  </footer>
</div>

<!-- ADMIN -->
<div class="admin-overlay" id="adminOverlay">
  <div class="admin-login" id="adminLogin">
    <div style="font-size:.68rem;color:var(--adm-muted);letter-spacing:.1em;text-transform:uppercase">Portfolio Admin</div>
    <div class="login-box">
      <input type="password" id="loginPass" placeholder="Password" onkeydown="if(event.key==='Enter')doLogin()">
      <button class="btn btn-primary" onclick="doLogin()">Unlock â†’</button>
      <div class="login-error" id="loginError"></div>
    </div>
    <div class="login-hint">Default: <strong>admin</strong> Â· Esc to close</div>
  </div>

  <div class="admin-layout" id="adminUI" style="display:none;width:100%">
    <aside class="admin-sidebar">
      <div class="sidebar-logo">
        <div class="sl-label">CMS</div>
        <div class="sl-name" id="sidebarName">â€”</div>
      </div>
      <nav class="sidebar-nav">
        <button class="sbtn active" onclick="showAPanel('profile')"    id="abtn-profile">   <span class="ico">â—ˆ</span>Profile</button>
        <button class="sbtn"        onclick="showAPanel('projects')"   id="abtn-projects">  <span class="ico">â—»</span>Projects</button>
        <button class="sbtn"        onclick="showAPanel('experience')" id="abtn-experience"><span class="ico">â—‘</span>Experience</button>
        <button class="sbtn"        onclick="showAPanel('blog')"       id="abtn-blog">      <span class="ico">âœ¦</span>Blog Posts</button>
        <button class="sbtn"        onclick="showAPanel('links')"      id="abtn-links">     <span class="ico">â†—</span>Links</button>
      </nav>
      <div class="sidebar-foot">
        <button class="sbtn" onclick="closeAdmin()"><span class="ico">â†</span>Exit</button>
      </div>
    </aside>

    <main class="admin-main">
      <div class="admin-topbar">
        <h1 id="aPanelTitle">Profile</h1>
        <div class="db-status"><span class="db-dot" id="dbDot"></span><span id="dbLabel" style="color:var(--adm-muted)">Connectingâ€¦</span></div>
      </div>
      <div class="admin-body">

        <div class="apanel active" id="apanel-profile">
          <div class="profile-form">
            <div class="fgrp"><label class="flbl">Full Name</label><input class="finput" id="pf-name" placeholder="Your Name"></div>
            <div class="fgrp"><label class="flbl">Tagline</label><input class="finput" id="pf-tagline" placeholder="Developer / Tinkerer / Builder"></div>
            <div class="fgrp"><label class="flbl">Email</label><input class="finput" id="pf-email" placeholder="you@example.com"></div>
            <div class="fgrp">
              <label class="flbl">Photo URL</label>
              <div style="display:flex;align-items:center;gap:16px">
                <img class="photo-preview" id="photoPreview" src="" alt="" style="display:none">
                <div style="flex:1">
                  <input class="finput" id="pf-photo" placeholder="https://... direct image URL" oninput="previewPhoto()">
                  <div class="fhint" style="margin-top:5px">Displays as a grayscale circle.</div>
                </div>
              </div>
            </div>
            <div class="fgrp">
              <label class="flbl">About (HTML)</label>
              <textarea class="ftarea" style="min-height:160px" id="pf-about"></textarea>
              <div class="fhint">Use &lt;p&gt; &lt;em&gt; &lt;strong&gt; &lt;a href="..."&gt;</div>
            </div>
            <div><button class="btn btn-primary" id="saveProfileBtn" onclick="saveProfile()">Save Profile</button></div>
          </div>
        </div>

        <div class="apanel" id="apanel-projects">
          <div class="sec-hdr"><span class="sec-label" id="projCount"></span><button class="btn btn-primary" onclick="openProjectDrawer()">+ Add Project</button></div>
          <div class="items-list" id="adminProjectsList"></div>
        </div>

        <div class="apanel" id="apanel-experience">
          <div class="sec-hdr"><span class="sec-label" id="expCount"></span><button class="btn btn-primary" onclick="openExpDrawer()">+ Add Experience</button></div>
          <div class="items-list" id="adminExpList"></div>
        </div>

        <div class="apanel" id="apanel-blog">
          <div class="sec-hdr"><span class="sec-label" id="blogCount"></span><button class="btn btn-primary" onclick="openPostDrawer()">+ New Post</button></div>
          <div class="items-list" id="adminBlogList"></div>
        </div>

        <div class="apanel" id="apanel-links">
          <div style="max-width:460px;display:flex;flex-direction:column;gap:14px">
            <div style="font-size:.66rem;color:var(--adm-muted)">Links shown on the home page below your bio.</div>
            <div id="linksEditor"></div>
            <button class="btn btn-ghost btn-sm" onclick="addLinkRow()">+ Add Link</button>
            <button class="btn btn-primary" onclick="saveLinks()">Save Links</button>
          </div>
        </div>

      </div>
    </main>
  </div>
</div>

<!-- DRAWERS -->
<div class="drawer-overlay" id="projectDrawer">
  <div class="drawer">
    <div class="drawer-hdr"><span class="drawer-title" id="projDrawerTitle">Add Project</span><button class="drawer-close" onclick="closeDrawer('projectDrawer')">âœ•</button></div>
    <div class="fgrp"><label class="flbl">Name</label><input class="finput" id="pd-name" placeholder="my-project"></div>
    <div class="fgrp"><label class="flbl">Description</label><input class="finput" id="pd-desc" placeholder="What does it do?"></div>
    <div class="fgrp"><label class="flbl">URL (optional)</label><input class="finput" id="pd-url" placeholder="https://github.com/..."></div>
    <div class="fgrp"><label class="flbl">Tags (comma-separated)</label><input class="finput" id="pd-tags" placeholder="go, postgres, cli"></div>
    <div class="dfooter">
      <button class="btn btn-ghost" onclick="closeDrawer('projectDrawer')">Cancel</button>
      <button class="btn btn-primary" onclick="saveProject()">Save</button>
    </div>
  </div>
</div>

<div class="drawer-overlay" id="expDrawer">
  <div class="drawer">
    <div class="drawer-hdr"><span class="drawer-title" id="expDrawerTitle">Add Experience</span><button class="drawer-close" onclick="closeDrawer('expDrawer')">âœ•</button></div>
    <div class="fgrp"><label class="flbl">Role / Title</label><input class="finput" id="ed-role" placeholder="Senior Engineer"></div>
    <div class="fgrp"><label class="flbl">Company</label><input class="finput" id="ed-company" placeholder="Acme Corp"></div>
    <div class="frow">
      <div class="fgrp"><label class="flbl">Start</label><input class="finput" id="ed-start" placeholder="Jan 2022"></div>
      <div class="fgrp"><label class="flbl">End</label><input class="finput" id="ed-end" placeholder="Present"></div>
    </div>
    <div class="fgrp"><label class="flbl">Description</label><textarea class="ftarea" id="ed-desc" placeholder="What did you work on?"></textarea></div>
    <div class="dfooter">
      <button class="btn btn-ghost" onclick="closeDrawer('expDrawer')">Cancel</button>
      <button class="btn btn-primary" onclick="saveExp()">Save</button>
    </div>
  </div>
</div>

<div class="drawer-overlay" id="postDrawer">
  <div class="drawer" style="width:600px">
    <div class="drawer-hdr"><span class="drawer-title" id="postDrawerTitle">New Post</span><button class="drawer-close" onclick="closeDrawer('postDrawer')">âœ•</button></div>
    <div class="fgrp"><label class="flbl">Title</label><input class="finput" id="bd-title" placeholder="Post title"></div>
    <div class="frow">
      <div class="fgrp"><label class="flbl">Date</label><input class="finput" id="bd-date" placeholder="Jan 2025"></div>
      <div class="fgrp"><label class="flbl">Status</label>
        <select class="fselect" id="bd-status"><option value="published">Published</option><option value="draft">Draft</option></select>
      </div>
    </div>
    <div class="fgrp">
      <label class="flbl">Body (HTML)</label>
      <div class="toolbar">
        <button class="tbtn" onclick="wrapSel('&lt;p&gt;','&lt;/p&gt;')">p</button>
        <button class="tbtn" onclick="wrapSel('&lt;h2&gt;','&lt;/h2&gt;')">H2</button>
        <button class="tbtn" onclick="wrapSel('&lt;strong&gt;','&lt;/strong&gt;')"><b>B</b></button>
        <button class="tbtn" onclick="wrapSel('&lt;em&gt;','&lt;/em&gt;')"><i>I</i></button>
        <button class="tbtn" onclick="doInsertLink()">link</button>
        <span class="tbtn tbtn-sep">|</span>
        <button class="tbtn" onclick="wrapSel('&lt;blockquote&gt;','&lt;/blockquote&gt;')">" quote</button>
        <button class="tbtn" onclick="wrapSel('&lt;pre&gt;&lt;code&gt;','&lt;/code&gt;&lt;/pre&gt;')">code</button>
        <button class="tbtn" onclick="wrapSel('&lt;ul&gt;\n  &lt;li&gt;','&lt;/li&gt;\n&lt;/ul&gt;')">list</button>
        <span class="tbtn tbtn-sep">|</span>
        <button class="tbtn" id="imgToggleBtn" onclick="toggleImgPanel()">ğŸ–¼ image</button>
      </div>
      <textarea class="ftarea" id="bd-body" style="min-height:240px;border-radius:0 0 4px 4px" placeholder="&lt;p&gt;Write your post here...&lt;/p&gt;"></textarea>
      <div class="fhint">Select text then click a toolbar button, or type HTML directly.</div>
    </div>
    <div class="img-panel" id="imgPanel" style="display:none">
      <div class="img-tabs">
        <button class="img-tab active" id="tab-upload" onclick="switchImgTab('upload')">â†‘ Upload</button>
        <button class="img-tab"        id="tab-url"    onclick="switchImgTab('url')">ğŸ”— URL</button>
      </div>
      <div class="img-pane active" id="pane-upload">
        <label class="drop-zone" ondragover="event.preventDefault();this.classList.add('over')" ondragleave="this.classList.remove('over')" ondrop="onDrop(event)">
          <input type="file" id="fileInput" accept="image/*" onchange="onFileChosen(this.files[0])">
          <div><strong>Click to browse</strong> or drag image here</div>
          <div style="font-size:.62rem;margin-top:4px;color:var(--adm-muted)">Embedded as base64 â€” no upload service needed</div>
        </label>
        <div class="progress" id="uploadProgress" style="display:none"><div class="progress-bar" id="uploadBar"></div></div>
        <div id="uploadPreview" style="display:none">
          <div class="preview-row"><img class="preview-thumb" id="uploadThumb" src="" alt=""><span class="preview-url" id="uploadUrl"></span></div>
          <div class="caption-row" style="margin-top:8px">
            <input class="finput" id="uploadCaption" placeholder="Caption (optional)">
            <button class="btn btn-primary btn-sm" onclick="insertFromUpload()" style="flex-shrink:0">Insert â†’</button>
          </div>
        </div>
        <div class="img-status" id="uploadStatus"></div>
      </div>
      <div class="img-pane" id="pane-url">
        <div class="fgrp"><label class="flbl">Image URL</label><input class="finput" id="urlInput" placeholder="https://example.com/photo.jpg" oninput="previewUrlImg()"></div>
        <div class="preview-row" id="urlPreview" style="display:none"><img class="preview-thumb" id="urlThumb" src="" alt=""><span class="preview-url" id="urlDisplay"></span></div>
        <div class="caption-row" style="margin-top:4px">
          <input class="finput" id="urlCaption" placeholder="Caption (optional)">
          <button class="btn btn-primary btn-sm" onclick="insertFromUrl()" style="flex-shrink:0">Insert â†’</button>
        </div>
        <div class="img-status" id="urlStatus"></div>
      </div>
    </div>
    <div class="dfooter">
      <button class="btn btn-ghost" onclick="closeDrawer('postDrawer')">Cancel</button>
      <button class="btn btn-primary" id="savePostBtn" onclick="savePost()">Save Post</button>
    </div>
  </div>
</div>

<script>
// â”€â”€ FIREBASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const FB='https://shlokdb-330b7-default-rtdb.asia-southeast1.firebasedatabase.app';

async function fbGet(path){const r=await fetch(FB+path+'.json');if(!r.ok)throw new Error(r.status);const d=await r.json();return d;}
async function fbSet(path,data){const r=await fetch(FB+path+'.json',{method:'PUT',body:JSON.stringify(data)});if(!r.ok)throw new Error(r.status);return r.json();}
async function fbPush(path,data){const r=await fetch(FB+path+'.json',{method:'POST',body:JSON.stringify(data)});if(!r.ok)throw new Error(r.status);return r.json();}
async function fbDel(path){await fetch(FB+path+'.json',{method:'DELETE'});}

// Convert Firebase object {key:{...}} to array with _key attached
function fbArr(obj){if(!obj)return[];return Object.entries(obj).map(([k,v])=>({...v,_key:k}));}

// â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let D={profile:{},projects:[],experience:[],posts:[],links:[]};
let editProject=null,editExp=null,editPost=null;
let dbOk=false,adminUnlocked=false;
const PASS=localStorage.getItem('ptf_pass')||'admin';

// â”€â”€ MOBILE NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleMobileNav(){const mn=gi('mobileNav'),hb=gi('hamburger');const isOpen=mn.classList.contains('open');if(isOpen){closeMobileNav();}else{mn.classList.add('open');hb.classList.add('open');document.body.style.overflow='hidden';}}
function closeMobileNav(){gi('mobileNav').classList.remove('open');gi('hamburger').classList.remove('open');document.body.style.overflow='';}

// â”€â”€ ROUTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const PAGES=['home','projects','experience','blog','post'];
const NAVS=['home','projects','experience','blog'];
function getRoute(){const h=location.hash.slice(1);if(!h||h==='home')return{page:'home',id:null};if(h.startsWith('post/'))return{page:'post',id:+h.split('/')[1]};if(PAGES.includes(h))return{page:h,id:null};return{page:'home',id:null};}
function onRoute(){const{page,id}=getRoute();PAGES.forEach(p=>gi('page-'+p).classList.remove('active'));gi('page-'+page).classList.add('active');NAVS.forEach(p=>{const n=gi('nav-'+p);if(n)n.classList.toggle('active',page===p||(page==='post'&&p==='blog'));});if(page==='post'&&id)renderPost(id);window.scrollTo(0,0);}
window.addEventListener('hashchange',onRoute);

// â”€â”€ LOAD â€” instant from cache, Supabase syncs in background â”€â”€
const LS='ptf_v2';
function lsSave(){try{localStorage.setItem(LS,JSON.stringify(D));}catch(e){}}
function lsLoad(){try{const r=localStorage.getItem(LS);if(r){Object.assign(D,JSON.parse(r));return true;}}catch(e){}return false;}

function loadAll(){
  // 1. Show cached data INSTANTLY â€” zero flicker
  if(lsLoad()){renderAll();}
  // 2. Fetch fresh data from Supabase silently in background
  syncFromSupabase();
}

async function syncFromSupabase(){
  try{
    const [profile,projects,experience,posts,links]=await Promise.all([
      fbGet('/profile'),fbGet('/projects'),fbGet('/experience'),fbGet('/posts'),fbGet('/links')
    ]);
    D.profile=profile||{};
    D.projects=fbArr(projects);
    D.experience=fbArr(experience);
    D.posts=fbArr(posts).sort((a,b)=>b.id-a.id);
    D.links=fbArr(links).sort((a,b)=>(a.display_order||0)-(b.display_order||0));
    dbOk=true;setDbStatus(true);
    lsSave();renderAll();
    if(adminUnlocked)renderAdminAll();
  }catch(e){
    console.warn('Firebase sync:',e.message);
    setDbStatus(false);
  }
}

function setDbStatus(ok){const dot=gi('dbDot'),lbl=gi('dbLabel');if(dot)dot.className='db-dot '+(ok?'ok':'err');if(lbl){lbl.textContent=ok?'Connected':'Offline';lbl.style.color=ok?'var(--adm-green)':'var(--adm-red)';}}

// â”€â”€ RENDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAll(){
  const p=D.profile,name=p.name||'Portfolio';
  document.title=name;gi('hdrName').textContent=name;
  gi('footerCopy').textContent=name+' Â© '+new Date().getFullYear()+(p.email?' Â· '+p.email:'');
  const sn=gi('sidebarName');if(sn)sn.textContent=name;
  gi('homeTagline').textContent=p.tagline||'';
  const wrap=gi('photoWrap'),ph=gi('photoPlaceholder');let img=wrap.querySelector('img.home-photo');
  if(p.photo_url){ph.style.display='none';if(!img){img=document.createElement('img');img.className='home-photo';wrap.appendChild(img);}img.src=p.photo_url;img.alt=name;}
  else{ph.style.display='flex';if(img)img.remove();}
  gi('homeAbout').innerHTML=p.about||'';
  gi('homeLinks').innerHTML=(D.links||[]).map(l=>'<a href="'+esc(l.url)+'" target="_blank" rel="noopener">'+esc(l.label)+'</a>').join('');
  const pub=(D.posts||[]).filter(x=>x.status==='published');
  if(pub.length){gi('homePostsSection').style.display='block';gi('homePostsList').innerHTML=pub.slice(0,5).map(p=>'<div class="home-post-row"><span class="home-post-date">'+esc(p.date)+'</span><a class="home-post-link" href="#post/'+p.id+'">'+esc(p.title)+'</a></div>').join('');}
  else gi('homePostsSection').style.display='none';
  gi('projectsContent').innerHTML=!(D.projects||[]).length?'<p class="pg-empty">No projects yet.</p>':(D.projects||[]).map(pr=>'<div class="project-row"><a class="project-name" href="'+esc(pr.url||'#')+'" '+(pr.url?'target="_blank" rel="noopener"':'onclick="return false"')+'>'+esc(pr.name)+'</a><span class="project-desc">'+esc(pr.description)+'</span><div class="project-tags">'+(pr.tags||[]).map(t=>'<span class="ptag">'+esc(t)+'</span>').join('')+'</div></div>').join('');
  gi('experienceContent').innerHTML=!(D.experience||[]).length?'<p class="pg-empty">No experience yet.</p>':(D.experience||[]).map(e=>'<div class="exp-item"><div class="exp-top"><span class="exp-role">'+esc(e.role)+'</span><span class="exp-period">'+esc(e.start_period)+' â€“ '+esc(e.end_period)+'</span></div><div class="exp-company">'+esc(e.company)+'</div><div class="exp-desc">'+esc(e.description)+'</div></div>').join('');
  gi('blogContent').innerHTML=!pub.length?'<p class="pg-empty">No posts yet.</p>':pub.map(p=>'<div class="post-row"><span class="post-date">'+esc(p.date)+'</span><a class="post-link" href="#post/'+p.id+'">'+esc(p.title)+'</a></div>').join('');
  const{page,id}=getRoute();if(page==='post'&&id)renderPost(id);
}
function renderPost(id){const p=(D.posts||[]).find(x=>x.id===id);if(!p){location.hash='blog';return;}gi('postPageDate').textContent=p.date;gi('postPageTitle').textContent=p.title;gi('postPageBody').innerHTML=p.body;}

// â”€â”€ ADMIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openAdmin(){gi('adminOverlay').classList.add('open');gi('adminLogin').style.display=adminUnlocked?'none':'flex';gi('adminUI').style.display=adminUnlocked?'flex':'none';document.body.style.overflow='hidden';if(!adminUnlocked)setTimeout(()=>gi('loginPass').focus(),80);else renderAdminAll();}
function doLogin(){if(gi('loginPass').value===PASS){adminUnlocked=true;gi('adminLogin').style.display='none';gi('adminUI').style.display='flex';gi('loginPass').value='';gi('loginError').textContent='';renderAdminAll();}else{gi('loginError').textContent='Incorrect password.';gi('loginPass').value='';}}
function closeAdmin(){gi('adminOverlay').classList.remove('open');document.body.style.overflow='';}
const PT={profile:'Profile',projects:'Projects',experience:'Experience',blog:'Blog Posts',links:'Links'};
function showAPanel(n){document.querySelectorAll('.apanel').forEach(p=>p.classList.remove('active'));document.querySelectorAll('.sbtn').forEach(b=>b.classList.remove('active'));gi('apanel-'+n).classList.add('active');gi('abtn-'+n).classList.add('active');gi('aPanelTitle').textContent=PT[n];}
function renderAdminAll(){renderAProfile();renderAProjects();renderAExp();renderABlog();renderALinks();}

// Profile
function renderAProfile(){gi('pf-name').value=D.profile.name||'';gi('pf-tagline').value=D.profile.tagline||'';gi('pf-email').value=D.profile.email||'';gi('pf-photo').value=D.profile.photo_url||'';gi('pf-about').value=D.profile.about||'';previewPhoto();}
function previewPhoto(){const u=v('pf-photo'),prev=gi('photoPreview');if(u){prev.src=u;prev.style.display='block';}else prev.style.display='none';}
async function saveProfile(){
  const data={name:v('pf-name'),tagline:v('pf-tagline'),email:v('pf-email'),photo_url:v('pf-photo'),about:gi('pf-about').value.trim()};
  try{await fbSet('/profile',data);D.profile=data;lsSave();renderAll();showToast('Profile saved');}
  catch(e){showToast('Error: '+e.message,'err');}
}

// Projects
function renderAProjects(){gi('projCount').textContent=(D.projects||[]).length+' project'+((D.projects||[]).length!==1?'s':'');gi('adminProjectsList').innerHTML=!(D.projects||[]).length?'<div class="empty-state">No projects yet.</div>':(D.projects||[]).map((p,i)=>'<div class="icard"><div class="icard-info"><div class="icard-title">'+esc(p.name)+'</div><div class="icard-sub">'+esc(p.description)+'</div><div class="icard-tags">'+(p.tags||[]).map(t=>'<span class="icard-tag">'+esc(t)+'</span>').join('')+'</div></div><div class="icard-actions"><button class="btn btn-ghost btn-sm" onclick="openProjectDrawer('+i+')">Edit</button><button class="btn btn-danger btn-sm" onclick="deleteProject('+i+')">Del</button></div></div>').join('');}
function openProjectDrawer(idx){editProject=idx!==undefined?idx:null;gi('projDrawerTitle').textContent=idx!==undefined?'Edit Project':'Add Project';const p=idx!==undefined?D.projects[idx]:{};gi('pd-name').value=p.name||'';gi('pd-desc').value=p.description||'';gi('pd-url').value=p.url||'';gi('pd-tags').value=(p.tags||[]).join(', ');gi('projectDrawer').classList.add('open');}
async function saveProject(){
  const data={name:v('pd-name'),description:v('pd-desc'),url:v('pd-url'),tags:v('pd-tags').split(',').map(t=>t.trim()).filter(Boolean),id:Date.now(),display_order:editProject!==null?D.projects[editProject].display_order:D.projects.length};
  if(!data.name){showToast('Name required','err');return;}
  try{
    if(editProject!==null){const key=D.projects[editProject]._key;data.id=D.projects[editProject].id;await fbSet('/projects/'+key,data);D.projects[editProject]={...data,_key:key};}
    else{const r=await fbPush('/projects',data);D.projects.push({...data,_key:r.name});}
    lsSave();renderAProjects();renderAll();closeDrawer('projectDrawer');showToast('Saved');editProject=null;
  }catch(e){showToast('Error: '+e.message,'err');}
}
async function deleteProject(idx){if(!confirm('Delete?'))return;try{await fbDel('/projects/'+D.projects[idx]._key);D.projects.splice(idx,1);lsSave();renderAProjects();renderAll();showToast('Deleted');}catch(e){showToast('Error: '+e.message,'err');}}

// Experience
function renderAExp(){gi('expCount').textContent=(D.experience||[]).length+' position'+((D.experience||[]).length!==1?'s':'');gi('adminExpList').innerHTML=!(D.experience||[]).length?'<div class="empty-state">No experience yet.</div>':(D.experience||[]).map((e,i)=>'<div class="icard"><div class="icard-info"><div class="icard-title">'+esc(e.role)+' Â· '+esc(e.company)+'</div><div class="icard-sub">'+esc(e.start_period)+' â€“ '+esc(e.end_period)+'</div></div><div class="icard-actions"><button class="btn btn-ghost btn-sm" onclick="openExpDrawer('+i+')">Edit</button><button class="btn btn-danger btn-sm" onclick="deleteExp('+i+')">Del</button></div></div>').join('');}
function openExpDrawer(idx){editExp=idx!==undefined?idx:null;gi('expDrawerTitle').textContent=idx!==undefined?'Edit Experience':'Add Experience';const e=idx!==undefined?D.experience[idx]:{};gi('ed-role').value=e.role||'';gi('ed-company').value=e.company||'';gi('ed-start').value=e.start_period||'';gi('ed-end').value=e.end_period||'';gi('ed-desc').value=e.description||'';gi('expDrawer').classList.add('open');}
async function saveExp(){
  const data={role:v('ed-role'),company:v('ed-company'),start_period:v('ed-start'),end_period:v('ed-end'),description:v('ed-desc'),id:Date.now(),display_order:editExp!==null?D.experience[editExp].display_order:D.experience.length};
  if(!data.role||!data.company){showToast('Role and company required','err');return;}
  try{
    if(editExp!==null){const key=D.experience[editExp]._key;data.id=D.experience[editExp].id;await fbSet('/experience/'+key,data);D.experience[editExp]={...data,_key:key};}
    else{const r=await fbPush('/experience',data);D.experience.push({...data,_key:r.name});}
    lsSave();renderAExp();renderAll();closeDrawer('expDrawer');showToast('Saved');editExp=null;
  }catch(e){showToast('Error: '+e.message,'err');}
}
async function deleteExp(idx){if(!confirm('Delete?'))return;try{await fbDel('/experience/'+D.experience[idx]._key);D.experience.splice(idx,1);lsSave();renderAExp();renderAll();showToast('Deleted');}catch(e){showToast('Error: '+e.message,'err');}}

// Blog
function renderABlog(){gi('blogCount').textContent=(D.posts||[]).length+' post'+((D.posts||[]).length!==1?'s':'');gi('adminBlogList').innerHTML=!(D.posts||[]).length?'<div class="empty-state">No posts yet.</div>':(D.posts||[]).map((p,i)=>'<div class="icard"><div class="icard-info"><div class="icard-title">'+esc(p.title)+'</div><div class="icard-sub">'+esc(p.date)+' Â· <span style="color:'+(p.status==='published'?'var(--adm-green)':'var(--adm-muted)')+'">'+p.status+'</span></div></div><div class="icard-actions"><button class="btn btn-ghost btn-sm" onclick="openPostDrawer('+i+')">Edit</button><button class="btn btn-danger btn-sm" onclick="deletePost('+i+')">Del</button></div></div>').join('');}
function openPostDrawer(idx){editPost=idx!==undefined?idx:null;gi('postDrawerTitle').textContent=idx!==undefined?'Edit Post':'New Post';const p=idx!==undefined?D.posts[idx]:{};gi('bd-title').value=p.title||'';gi('bd-date').value=p.date||'';gi('bd-status').value=p.status||'published';gi('bd-body').value=p.body||'';resetImgPanel();gi('postDrawer').classList.add('open');}
async function savePost(){
  const data={title:v('bd-title'),date:v('bd-date'),status:gi('bd-status').value,body:gi('bd-body').value.trim(),id:Date.now()};
  if(!data.title){showToast('Title required','err');return;}
  try{
    if(editPost!==null){const key=D.posts[editPost]._key;data.id=D.posts[editPost].id;await fbSet('/posts/'+key,data);D.posts[editPost]={...data,_key:key};}
    else{const r=await fbPush('/posts',data);D.posts.unshift({...data,_key:r.name});}
    lsSave();renderABlog();renderAll();closeDrawer('postDrawer');showToast('Saved');editPost=null;
  }catch(e){showToast('Error: '+e.message,'err');}
}
async function deletePost(idx){if(!confirm('Delete?'))return;try{await fbDel('/posts/'+D.posts[idx]._key);D.posts.splice(idx,1);lsSave();renderABlog();renderAll();showToast('Deleted');}catch(e){showToast('Error: '+e.message,'err');}}

// Links
function renderALinks(){gi('linksEditor').innerHTML=(D.links||[]).map((l,i)=>'<div style="display:flex;gap:9px;margin-bottom:9px;align-items:center"><input class="finput" style="width:110px" value="'+esc(l.label)+'" id="lk-l-'+i+'" placeholder="github"><input class="finput" style="flex:1" value="'+esc(l.url)+'" id="lk-u-'+i+'" placeholder="https://..."><button class="btn btn-danger btn-sm" onclick="removeLinkRow('+i+')">âœ•</button></div>').join('');}
function addLinkRow(){if(!D.links)D.links=[];D.links.push({label:'',url:''});renderALinks();}
function removeLinkRow(i){D.links.splice(i,1);renderALinks();}
async function saveLinks(){
  const updated=D.links.map((l,i)=>({label:(gi('lk-l-'+i)||{value:l.label}).value.trim(),url:(gi('lk-u-'+i)||{value:l.url}).value.trim(),display_order:i})).filter(l=>l.label&&l.url);
  try{
    await fbSet('/links',null); // clear
    const saved=[];
    for(const l of updated){const r=await fbPush('/links',l);saved.push({...l,_key:r.name});}
    D.links=saved;lsSave();renderAll();renderALinks();showToast('Links saved');
  }catch(e){showToast('Error: '+e.message,'err');}
}

// Post editor
function wrapSel(before,after){const b=before.replace(/&lt;/g,'<').replace(/&gt;/g,'>'),a=after.replace(/&lt;/g,'<').replace(/&gt;/g,'>');const ta=gi('bd-body'),s=ta.selectionStart,e=ta.selectionEnd,sel=ta.value.substring(s,e)||'text';ta.value=ta.value.substring(0,s)+b+sel+a+ta.value.substring(e);ta.focus();ta.selectionStart=s+b.length;ta.selectionEnd=s+b.length+sel.length;}
function doInsertLink(){const url=prompt('URL:');if(!url)return;const ta=gi('bd-body'),s=ta.selectionStart,e=ta.selectionEnd,lbl=ta.value.substring(s,e)||'link text';ta.value=ta.value.substring(0,s)+'<a href="'+url+'">'+lbl+'</a>'+ta.value.substring(e);ta.focus();}
function insertAtCursor(html){const ta=gi('bd-body'),pos=ta.selectionStart;ta.value=ta.value.substring(0,pos)+html+ta.value.substring(pos);ta.focus();ta.selectionStart=ta.selectionEnd=pos+html.length;}
let _uploadedUrl='';
function toggleImgPanel(){const p=gi('imgPanel'),btn=gi('imgToggleBtn'),show=p.style.display==='none';p.style.display=show?'block':'none';btn.classList.toggle('tbtn-active',show);}
function resetImgPanel(){gi('imgPanel').style.display='none';gi('imgToggleBtn').classList.remove('tbtn-active');gi('uploadPreview').style.display='none';gi('uploadStatus').textContent='';gi('uploadCaption').value='';gi('urlInput').value='';gi('urlPreview').style.display='none';gi('urlStatus').textContent='';gi('urlCaption').value='';gi('uploadProgress').style.display='none';gi('uploadBar').style.width='0%';gi('fileInput').value='';_uploadedUrl='';switchImgTab('upload');}
function switchImgTab(tab){['upload','url'].forEach(t=>{gi('tab-'+t).classList.toggle('active',t===tab);gi('pane-'+t).classList.toggle('active',t===tab);});}
function onDrop(e){e.preventDefault();e.currentTarget.classList.remove('over');const f=e.dataTransfer.files[0];if(f)onFileChosen(f);}
function onFileChosen(file){if(!file||!file.type.startsWith('image/')){setImgStatus('upload','Not an image','err');return;}if(file.size>8*1024*1024){setImgStatus('upload','Max 8MB','err');return;}gi('uploadProgress').style.display='block';gi('uploadPreview').style.display='none';const bar=gi('uploadBar');let w=0;const iv=setInterval(()=>{w=Math.min(w+10,85);bar.style.width=w+'%';},80);const reader=new FileReader();reader.onload=e=>{clearInterval(iv);bar.style.width='100%';setTimeout(()=>gi('uploadProgress').style.display='none',300);_uploadedUrl=e.target.result;gi('uploadThumb').src=_uploadedUrl;gi('uploadUrl').textContent=file.name+' ('+Math.round(file.size/1024)+' KB)';gi('uploadPreview').style.display='block';setImgStatus('upload','Ready âœ“','ok');};reader.onerror=()=>{clearInterval(iv);setImgStatus('upload','Read failed','err');};reader.readAsDataURL(file);}
function insertFromUpload(){if(!_uploadedUrl){setImgStatus('upload','No image selected','err');return;}doInsertImg(_uploadedUrl,gi('uploadCaption').value.trim());setImgStatus('upload','Inserted âœ“','ok');setTimeout(()=>{gi('imgPanel').style.display='none';gi('imgToggleBtn').classList.remove('tbtn-active');},500);}
function previewUrlImg(){const url=gi('urlInput').value.trim(),prev=gi('urlPreview');if(url){gi('urlThumb').src=url;gi('urlDisplay').textContent=url;prev.style.display='flex';}else prev.style.display='none';}
function insertFromUrl(){const url=gi('urlInput').value.trim();if(!url){setImgStatus('url','Enter a URL','err');return;}doInsertImg(url,gi('urlCaption').value.trim());setImgStatus('url','Inserted âœ“','ok');setTimeout(()=>{gi('imgPanel').style.display='none';gi('imgToggleBtn').classList.remove('tbtn-active');},500);}
function doInsertImg(url,caption){const img='<img src="'+url+'" alt="'+(caption||'')+'" style="max-width:100%">';insertAtCursor(caption?'\n<figure>\n  '+img+'\n  <figcaption>'+caption+'</figcaption>\n</figure>\n':'\n'+img+'\n');}
function setImgStatus(tab,msg,type){const el=gi(tab==='upload'?'uploadStatus':'urlStatus');el.textContent=msg;el.className='img-status'+(type?' '+type:'');}

// Utils
function gi(id){return document.getElementById(id);}
function v(id){return gi(id).value.trim();}
function esc(s){return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');}
function closeDrawer(id){gi(id).classList.remove('open');}
document.querySelectorAll('.drawer-overlay').forEach(d=>d.addEventListener('click',e=>{if(e.target===d)d.classList.remove('open');}));
document.addEventListener('keydown',e=>{if(e.key!=='Escape')return;const od=document.querySelector('.drawer-overlay.open');if(od){od.classList.remove('open');return;}if(gi('adminOverlay').classList.contains('open')){closeAdmin();return;}if(gi('mobileNav').classList.contains('open')){closeMobileNav();}});
let _tt;
function showToast(msg,type='ok'){const ex=document.querySelector('.toast');if(ex)ex.remove();clearTimeout(_tt);const t=document.createElement('div');t.className='toast '+type;t.textContent=msg;document.body.appendChild(t);_tt=setTimeout(()=>t.remove(),3500);}

// Boot
onRoute();
loadAll();
</script>
</body>
</html>
